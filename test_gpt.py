import g4f

specialties = [
    "Акушер",
    "Акушер-гинеколог",
    "Аллерголог",
    "Андролог",
    "Андролог - уролог",
    "Анестезиолог-реаниматолог",
    "Аритмолог",
    "Артролог",
    "Вегетолог",
    "Венеролог",
    "Вертебролог",
    "Вирусолог",
    "Врач ЛФК",
    "Врач МРТ",
    "Врач УЗИ",
    "Врач функциональной диагностики",
    "Врач-цитолог",
    "Гастроэнтеролог",
    "Гематолог",
    "Гемостазиолог",
    "Генетик",
    "Гепатолог",
    "Гериатр (геронтолог)",
    "Гинеколог",
    "Гинеколог-эндокринолог",
    "Терапевт",
    "Гирудотерапевт",
    "Гнатолог",
    "Гомеопат",
    "Дерматолог",
    "Дерматовенеролог",
    "Дефектолог",
    "Диабетолог",
    "Диетолог",
    "Иммунолог",
    "Инфекционист",
    "Кардиолог",
    "Кардиохирург",
    "Кинезиолог",
    "Колопроктолог",
    "Косметолог",
    "Лазерный хирург",
    "Логопед",
    "Малоинвазивный хирург",
    "Маммолог",
    "Мануальный терапевт",
    "Массажист",
    "Медицинская сестра",
    "Миколог",
    "Нарколог",
    "Невролог",
    "Нейропсихолог",
    "Нейрофизиолог",
    "Нейрохирург",
    "Неонатолог",
    "Нефролог",
    "Нутрициолог",
    "Ожоговый хирург (комбустиолог)",
    "Окулист (офтальмолог)",
    "Онкогинеколог",
    "Онкодерматолог",
    "Онколог",
    "Онкопроктолог",
    "Онкоуролог",
    "Ортопед",
    "Ортопед - травматолог",
    "Остеопат",
    "Отоларинголог (оториноларинголог, лор)",
    "Отоневролог",
    "Офтальмохирург",
    "Паразитолог",
    "Педиатр",
    "Пластический хирург",
    "Подолог",
    "Проктолог",
    "Профпатолог",
    "Психиатр",
    "Психиатр - нарколог",
    "Психолог",
    "Психотерапевт",
    "Пульмонолог",
    "Радиолог",
    "Реабилитолог",
    "Реаниматолог",
    "Ревматолог",
    "Рентгенолог",
    "Репродуктолог",
    "Рефлексотерапевт",
    "Сексолог",
    "Семейный врач",
    "Сомнолог",
    "Сосудистый хирург",
    "Специалист по клеточным технологиям",
    "Спортивный врач",
    "Стоматолог",
    "Стоматолог-гигиенист",
    "Стоматолог-имплантолог",
    "Стоматолог-ортодонт",
    "Стоматолог-ортопед",
    "Стоматолог-пародонтолог",
    "Стоматолог-терапевт",
    "Стоматолог-хирург",
    "Сурдолог",
    "Торакальный хирург",
    "Травматолог",
    "Трансфузиолог",
    "Трихолог",
    "УЗИ-специалист",
    "Уролог",
    "Фельдшер",
    "Физиотерапевт",
    "Флеболог",
    "Фониатр",
    "Фтизиатр",
    "Химиотерапевт",
    "Хирург",
    "Челюстно-лицевой хирург",
    "Эмбриолог",
    "Эндокринолог",
    "Эндоскопист",
    "Эпилептолог",
    "Рентгенэндоваскулярный хирург"
]

async def getMedicineSpecialize(prompt: str) -> str:
    try:
        ## Обработка обычного ответа
        response = await g4f.ChatCompletion.create_async(
            model=g4f.models.gpt_35_turbo,
            messages=[{"role": "user", "content": f"Выбери профиль врача по симптому или услуге: {prompt}. Ответь 1 словом на русском.(ангину, горло лечит Отоларинголог. Нарушения сна лечит Сомнолог. Если сыпь, то говори что Дерматолог)"}],
            provider=g4f.Provider.Aura,
        )  # Альтернативный вариант установки модели

        if(response[-1] == "."):
            response = response[0:-1]

        print(response)

        for i in specialties:
            if response.lower() in i.lower():
                return i
        
        return "Врач не определен"  # Возвращаем строку, если это то, что вам нужно
    
    except Exception as e:
        return str(e)

